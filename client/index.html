<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>client</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
  </head>
  <body>
    <div id="root"></div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>
    <script type="module" src="/src/main.tsx"></script>

    <!-- calendar -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let selectedInput = null;

        const startCheckbox = document.querySelector("#start-date-checkbox");
        const dueCheckbox = document.querySelector("#due-date-checkbox");

        function handleCheckboxChange(checkbox, otherCheckbox, inputSelector) {
          if (checkbox.checked) {
            otherCheckbox.checked = false;
            selectedInput = inputSelector;
          } else {
            selectedInput = null;
          }
        }

        startCheckbox.addEventListener("change", function () {
          handleCheckboxChange(this, dueCheckbox, "#start-date");
        });

        dueCheckbox.addEventListener("change", function () {
          handleCheckboxChange(this, startCheckbox, "#due-date");
        });

        // Khởi tạo Flatpickr - hien thi lich
        flatpickr("#calendar", {
          inline: true,
          enableTime: true,
          dateFormat: "Y-m-d\\TH:i:s\\Z",
          onChange: function (selectedDates, dateStr) {
            if (selectedInput) {
              document.querySelector(selectedInput).value = dateStr;
            }
          },
        });

        const saveDateBtn = document.querySelector(
          "#dateModal .modal-footer .btn-primary:first-child"
        );
        saveDateBtn.addEventListener("click", function () {
          saveDateValues(); // Gọi hàm từ boardDetail.js
          const dateModal = bootstrap.Modal.getInstance(
            document.getElementById("dateModal")
          );
          dateModal.hide();
        });

        const removeDateBtn = document.querySelector(
          "#dateModal .modal-footer .btn-primary:last-child"
        );
        removeDateBtn.addEventListener("click", function () {
          removeDateValues(); // Gọi hàm từ boardDetail.js
          const dateModal = bootstrap.Modal.getInstance(
            document.getElementById("dateModal")
          );
          dateModal.hide();
        });
      });
    </script>
  </body>
</html>
